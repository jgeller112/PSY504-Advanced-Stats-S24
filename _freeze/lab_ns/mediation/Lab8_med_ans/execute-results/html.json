{
  "hash": "643994dbdbf4284d9eed1da37cb928b9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 08: Mediation Answers\"\nsubtitle: \"Lab 8\"\ndate: last-modified\nformat:\n    html:\n        self-contained: true\n        anchor-sections: true\n        code-tools: true\n        code-fold: true\n        fig-width: 8\n        fig-height: 4\n        code-block-bg: \"#f1f3f5\"\n        code-block-border-left: \"#31BAE9\"\n        mainfont: Source Sans Pro\n        theme: journal\n        toc: true\n        toc-depth: 3\n        toc-location: left\n        captions: true\n        cap-location: margin\n        table-captions: true\n        tbl-cap-location: margin\n        reference-location: margin\n        \nexecute:\n  message: false\n  warning: false\n---\n\n\n## Load Data\n\nYou can read in data from osf directly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(MeMoBootR)\nlibrary(lavaan)\nlibrary(easystats)\nlibrary(knitr)\n\nurl <- \"https://osf.io/4yfwq//?action=download\"\n\nfilename <- \"Data.txt\"\n\ndata <- read.delim(url, \n                   header = TRUE, \n                   sep = \"\\t\",\n                   dec = \".\")\n```\n:::\n\n\n## Tidy\n\n-   Clean up the dataset from OSF\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmed1 <- data %>% filter(mPFC.LAmyg_post !=\"N/A\", emobiasscore != \"N/A\") %>%\n  mutate(L_amyg_post=as.numeric(mPFC.LAmyg_post), emobias = as.numeric(emobiasscore), group=Group..1.inc..2.dec., L_amyg_pre=as.numeric(`mPFC.LAmyg_pre`)) %>%\n  select(group, emobias, L_amyg_post, L_amyg_pre) %>%\n  mutate(group=ifelse(group==1, -0.5, 0.5))\n```\n:::\n\n\n## Simple mediation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# fit regular mediation\nlibrary(JSmediation)\n\nmediation_fit <- mdt_simple(med1,\n             IV =group,\n             DV = emobias,\n             M  = L_amyg_post)\n\nadd_index(mediation_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTest of mediation (simple mediation)\n==============================================\n\nVariables:\n\n- IV: group \n- DV: emobias \n- M: L_amyg_post \n\nPaths:\n\n====  ==============  =====  =======================\nPath  Point estimate     SE  APA                    \n====  ==============  =====  =======================\na             -0.087  0.030  t(145) = 2.86, p = .005\nb              1.466  0.621  t(140) = 2.36, p = .020\nc             -0.458  0.224  t(141) = 2.05, p = .042\nc'            -0.313  0.228  t(140) = 1.37, p = .173\n====  ==============  =====  =======================\n\nIndirect effect index:\n\n- type: Indirect effect \n- point estimate: -0.127 \n- confidence interval:\n  - method: Monte Carlo (5000 iterations)\n  - level: 0.05 \n  - CI: [-0.293; -0.0134]\n\nFitted models:\n\n- X -> Y \n- X -> M \n- X + M -> Y \n```\n\n\n:::\n:::\n\n\n-   The `mdt_simple` package does not allow for covars. You might get a sig total path if you do not include the pre-intervention measure. This differs from the paper. Below is how you can include the covariate.\n\n## Simple mediation with covariate\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(MeMoBootR)\n\nmed1 <- mediation1(x =group,\n             y = emobias,\n             m  = L_amyg_pos, \n           cvs=c(\"L_amyg_pre\"))\n```\n:::\n\n\n## Lavaan\n\nHere we are fitting a mediation model with lavaan (controlling for pre-intervention scores)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lavaan)\n\nsem1 <- '\n#b and cp and covar\nemobias ~ b * L_amyg_post + cp * group + covar*L_amyg_pre\n#a\nL_amyg_post ~ a * group\n# indirect 1\nindirect1 := a * b\n\n# total\ntotal := cp + (a * b) \n\n#prob mediated\n#prop_indirect1\nprop_med_1 := indirect1 / (indirect1+cp)\n'\n\nfit <- sem(model = sem1, data = med1, se = \"bootstrap\",  bootstrap = 5000)\n\n# you should run 5000-10000 bootstraps\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlavaan::parameterestimates(fit, ci=TRUE, boot.ci.type = \"perc\") %>%\n  kable()\n```\n\n::: {.cell-output-display}\n\n\n|lhs         |op |rhs                      |label      |        est|         se|          z|    pvalue|   ci.lower|   ci.upper|\n|:-----------|:--|:------------------------|:----------|----------:|----------:|----------:|---------:|----------:|----------:|\n|emobias     |~  |L_amyg_post              |b          |  1.5057497|  0.5456136|  2.7597361| 0.0057848|  0.3905243|  2.5721418|\n|emobias     |~  |group                    |cp         | -0.2813766|  0.2315785| -1.2150376| 0.2243518| -0.7432471|  0.1664015|\n|emobias     |~  |L_amyg_pre               |covar      |  0.6311997|  0.4036238|  1.5638316| 0.1178571| -0.1304407|  1.4732460|\n|L_amyg_post |~  |group                    |a          | -0.0993187|  0.0291426| -3.4080316| 0.0006543| -0.1560462| -0.0427678|\n|emobias     |~~ |emobias                  |           |  1.6805662|  0.2349732|  7.1521624| 0.0000000|  1.2157187|  2.1387490|\n|L_amyg_post |~~ |L_amyg_post              |           |  0.0313923|  0.0077930|  4.0282711| 0.0000562|  0.0175481|  0.0473841|\n|group       |~~ |group                    |           |  0.2499878|  0.0000000|         NA|        NA|  0.2499878|  0.2499878|\n|group       |~~ |L_amyg_pre               |           | -0.0108294|  0.0000000|         NA|        NA| -0.0108294| -0.0108294|\n|L_amyg_pre  |~~ |L_amyg_pre               |           |  0.0339821|  0.0000000|         NA|        NA|  0.0339821|  0.0339821|\n|indirect1   |:= |a*b                      |indirect1  | -0.1495492|  0.0631576| -2.3678741| 0.0178906| -0.2804306| -0.0341844|\n|total       |:= |cp+(a*b)                 |total      | -0.4309257|  0.2202174| -1.9568192| 0.0503687| -0.8685779|  0.0013767|\n|prop_med_1  |:= |indirect1/(indirect1+cp) |prop_med_1 |  0.3470416| 13.6118072|  0.0254956| 0.9796596| -0.3666774|  2.0795965|\n\n\n:::\n:::\n\n\n## Write-up\n\nMediation analysis was carried out using the *lavaan* package in R. I tested whether left amygdala-mPFC connectivity post-intervention mediates the association between Condition and Positive Emotional Memory Bias. I controlled for the effects of pre-intervention amygdala-mPFC connectivity on the mediator and outcome variable. 10,000 bootstrap samples were used. I replicated the patterns of significance found by Cho et al. (2023). Effect estimates slightly varied from the original study, which may be due to the use of bootstrapping which involves random sampling.\n\nIn the present model (Figure 1), the bootstrapped indirect effect was significant, ab = -0.15, *p* = 0.02, 95% CI [-0.29,-0.029], standardized effect = -0.049. The direct effect was not significant, *c'* = -0.279, *p* = 0.236, 95% CI [-0.756, 0.178] , standardized effect = -0.104. The total effect was not significant, *c* = -0.412, *p* = 0.068, 95% CI [-0.858, 0.028], standardized effect = -0.153. Thus, according to the causal steps approach, there was no mediation (the total path was no significant). However, according to the joint significance test and the boostrapped test, there was a significant mediation effect. Thus, the results indicate that post-intervention amygdala-mPFC connectivity mediated the association between Condition and bias scores. I really appreciate that the authors shared their data openly on OSF and OpenNeuro. However, the authors indicated in the paper that analysis material was also available, but I wasn't able to find this. This would have been helpful to confirm how they specified their mediation model.\n\n![](images/clipboard-2703086673.png)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}